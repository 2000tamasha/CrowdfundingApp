<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FundWorld</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
   
</head>
<body>  
    
    <!-- Navigation -->
    <div class="container mt-3">
        <h2>FundWorld</h2>
  <ul class="nav">
    <li class="nav-item">
      <a class="nav-link" href="index.html">Home</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#">Search</a>
    </li>
  </ul>
</div>
   

   <div class="container mt-3">
    <div class="mb-3 mt-3">
        <h2>Search a fundraiser by Category</h2>

        
        <div class="form-check">
    <input type="checkbox" class="form-check-input" id="check1" name="category" value="Medical">
    <label class="form-check-label" for="check1">Medical</label>
            </div>
        
        <div class="form-check">
    <input type="checkbox" class="form-check-input" id="check2" name="category" value="Education">
    <label class="form-check-label" for="check1">Education</label>
    </div>

        <div class="form-check">
    <input type="checkbox" class="form-check-input" id="check3" name="category" value="Environment">
    <label class="form-check-label" for="check1">Environment</label>
            </div>
        
    </div>
    <input type="button"  value="Search" class="btn btn-primary" onclick="searchByCategory()" >
 
</div>
         <div id="data"></div>

    <script>

        function searchByCategory() {
        // Get all selected checkboxes
        const checkboxes = document.querySelectorAll('input[name="category"]:checked');
        const selectedCategories = Array.from(checkboxes).map(cb => cb.value);

        // Convert to a comma-separated string (or use as array depending on API)
        const categoriesParam = selectedCategories.join(',');

        // Call the API with the selected categories
        fetch(`http://localhost:3060/api/search/category?categories=${categoriesParam}`)
            .then(response => response.json())
            .then(data => {
                const dataDiv = document.getElementById('data');
                dataDiv.innerHTML = "";

                if (data.length > 0) {
                    data.forEach(fundraiser => {
                        const newP = document.createElement("p");
                        newP.textContent = `Fundraiser: ${fundraiser.FUNDRAISER_ID}, Organizer: ${fundraiser.ORGANIZER}, Category: ${fundraiser.CATEGORY_NAME}`;
                        dataDiv.appendChild(newP);
                    });
                } else {
                    dataDiv.textContent = "No fundraiser data found.";
                }
            })
            .catch(error => {
                console.error("Error fetching data", error);
                document.getElementById('data').textContent = "Failed to load data";
            });
    }


    </script>






















    


    <!-- Footer --> 
    <div class="container-fluid pt-5">
           <p class="text-center">Contact us: FundWorld@org.com</p> 
</div>

</body>
</html>
