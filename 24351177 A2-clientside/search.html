<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FundWorld</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
   
</head>
<body>  
    
    <!-- Navigation -->
    <div class="container mt-3">
        <h2>FundWorld</h2>
  <ul class="nav">
    <li class="nav-item">
      <a class="nav-link" href="index.html">Home</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#">Search</a>
    </li>
  </ul>
</div>
   
     <!-- Form -->
    <div class="container mt-3">
  <h2>Search a fundraiser</h2>
  <form action="#">
    <div class="mb-3 mt-3">
      <label for="organizer" class="form-label">Fundraiser organizer:</label>
    <select class="form-select" id="select1" name="select1">
      <option value="ronnie">Ronnie Hong</option>
      <option value="raven">Raven Ziazan</option>
      <option value="blake" >Blake Murphy</option>
      <option value="charli">Charlize Sadlier</option>
      <option value="henry">Henry Diggs</option>
    </select>
    </div>

      
    <div class="mb-3">
<label for="city" class="form-label">City:</label>
    <select class="form-select" id="select2" name="select2">
      <option value="los angeles">Los Angeles</option>
      <option value="cape town">Cape Town</option>
      <option value="san fran">San Francisco</option>
        <option value="new york">New York</option>
        <option value="rio">Rio de Janeiro</option>
    </select>
        
    </div>

      
    <div class="form-check mb-3">
      <label class="form-check-label">
     <div class="form-check">
  <input type="radio" class="form-check-input" id="radio1" name="radio" value="option1" checked>Medical
  <label class="form-check-label" for="radio1"></label>
</div>
<div class="form-check">
  <input type="radio" class="form-check-input" id="radio2" name="radio" value="option2">Education
  <label class="form-check-label" for="radio2"></label>
</div>
          <div class="form-check">
  <input type="radio" class="form-check-input" id="radio2" name="radio" value="option3">Environment
  <label class="form-check-label" for="radio3"></label>
</div>

      </label>
    </div>
    <button type="submit" class="btn btn-primary" onclick>Search</button>
  </form>
</div>

         <div id="data"></div>

// Function for search
function performSearch() {
    const organizer = document.querySelector('select[name="select1"]').value;
    const city = document.querySelector('select[name="select2"]').value;
    const category = document.querySelector('input[name="radio"]:checked').value;

    // Check if at least one criterion is selected
    if (!organizer && !city && !category) {
        alert('Please select at least one search criteria.');
        return;
    }

    const promises = []; // Array to hold API call promises

    // Call API for Organizer if selected
    if (organizer) {
        promises.push(
            fetch(`http://localhost:3060/api/FUNDRAISER/organizer/${organizer}`)
                .then(response => response.json())
        );
    }

    // Call API for City if selected
    if (city) {
        promises.push(
            fetch(`http://localhost:3060/api/FUNDRAISER/${city}`)
                .then(response => response.json())
        );
    }

    // Call API for Category if selected
    promises.push(
        fetch(`http://localhost:3060/api/FUNDRAISER/category/${category}`)
            .then(response => response.json())
    );

    // Wait for all API calls to finish
    Promise.all(promises)
        .then(results => {
            const dataDiv = document.getElementById('data');
            dataDiv.innerHTML = ""; // Clear existing content

            // Create a Set to handle unique fundraisers
            const uniqueFundraisers = new Set();

            // Loop through the results to populate unique fundraisers
            results.forEach(records => {
                if (Array.isArray(records)) {
                    records.forEach(fundraiser => uniqueFundraisers.add(JSON.stringify(fundraiser)));
                }
            });

            // Display results
            if (uniqueFundraisers.size > 0) {
                uniqueFundraisers.forEach(fundraiser => {
                    const parsedFundraiser = JSON.parse(fundraiser);
                    const fundraiserDiv = document.createElement("div");
                    fundraiserDiv.innerHTML = `
                        <h5>${parsedFundraiser.ORGANIZER} - ${parsedFundraiser.CITY}</h5>
                        <p>Fundraiser ID: ${parsedFundraiser.FUNDRAISER_ID}</p>
                        <a href="/fundraiser?id=${parsedFundraiser.FUNDRAISER_ID}" class="btn btn-link">View Details</a>
                    `;
                    dataDiv.appendChild(fundraiserDiv);
                });
            } else {
                dataDiv.innerHTML = '<strong style="color: red;">No fundraisers found.</strong>';
            }
        })
        .catch(error => {
            console.error("Error fetching data:", error);
            document.getElementById('data').innerHTML = '<strong style="color: red;">No fundraisers found.</strong>';
        });
}




    <!-- Footer --> 
    <div class="container-fluid pt-5">
           <p class="text-center">Contact us: FundWorld@org.com</p> 
</div>

</body>
</html>
